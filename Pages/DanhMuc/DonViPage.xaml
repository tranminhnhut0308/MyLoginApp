<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:MyLoginApp.ViewModels"
             x:Class="MyLoginApp.Pages.DonViPage"
             Title="Quáº£n lÃ½ ÄÆ¡n Vá»‹">

    <ContentPage.BindingContext>
        <viewmodels:DonViViewModel />
    </ContentPage.BindingContext>

    <Grid RowDefinitions="Auto,*,Auto" Padding="10">

        <!-- CÃ¡c nÃºt ThÃªm, Sá»­a, XÃ³a -->
        <HorizontalStackLayout Grid.Row="0" Spacing="15" HorizontalOptions="CenterAndExpand" Margin="0,0,0,10">
            <Button Text="âž•ThÃªm" Command="{Binding ShowAddFormCommand}" BackgroundColor="#4CAF50" TextColor="Black" WidthRequest="110" HeightRequest="50" CornerRadius="20" />
            <Button Text="âœï¸ Sá»­a" Command="{Binding ShowEditFormCommand}" IsEnabled="{Binding SelectedDonVi, Converter={StaticResource NullToBooleanConverter}}" BackgroundColor="#FFCF07" TextColor="Black" WidthRequest="110" HeightRequest="50" CornerRadius="20">
                <Button.Triggers>
                    <Trigger TargetType="Button" Property="IsEnabled" Value="False">
                        <Setter Property="BackgroundColor" Value="#FFCF07" />
                        <Setter Property="Opacity" Value="0.7" />
                    </Trigger>
                </Button.Triggers>
            </Button>
            <Button Text="ðŸ—‘ï¸ XÃ³a" Command="{Binding DeleteCommand}" IsEnabled="{Binding SelectedDonVi, Converter={StaticResource NullToBooleanConverter}}" BackgroundColor="#F44336" TextColor="Black" WidthRequest="110" HeightRequest="50" CornerRadius="20">
                <Button.Triggers>
                    <Trigger TargetType="Button" Property="IsEnabled" Value="False">
                        <Setter Property="BackgroundColor" Value="#F44336" />
                        <Setter Property="Opacity" Value="0.7" />
                    </Trigger>
                </Button.Triggers>
            </Button>
        </HorizontalStackLayout>

        <!-- Danh sÃ¡ch ÄÆ¡n Vá»‹ -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Spacing="15">
                <Label Text="ðŸ“‹ Danh sÃ¡ch Ä‘Æ¡n vá»‹" FontAttributes="Bold" FontSize="22" HorizontalOptions="Center" TextColor="#333" />

                <CollectionView ItemsSource="{Binding DanhSachDonVi}" SelectionMode="Single" SelectedItem="{Binding SelectedDonVi, Mode=TwoWay}">
                    <!-- CHá»ˆ HIá»‚N THá»Š 1 Cá»˜T -->
                    <CollectionView.ItemsLayout>
                        <LinearItemsLayout Orientation="Vertical" ItemSpacing="10" />
                    </CollectionView.ItemsLayout>

                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame CornerRadius="10" Padding="10" HasShadow="True" BackgroundColor="#F5F5F5">
                                <VerticalStackLayout Spacing="5">
                                    <Label Text="{Binding MaDV, StringFormat='ðŸ¢ MÃ£: {0}'}" FontAttributes="Bold" FontSize="16" />
                                    <Label Text="{Binding TenDV, StringFormat='ðŸ“› TÃªn: {0}'}" FontSize="14" TextColor="#555" />
                                    <Label Text="{Binding DiaChi, StringFormat='ðŸ“ Äá»‹a chá»‰: {0}'}" FontSize="14" TextColor="#777" />
                                    <Label Text="{Binding DienThoai, StringFormat='ðŸ“ž Äiá»‡n thoáº¡i: {0}'}" FontSize="14" TextColor="#777" />
                                </VerticalStackLayout>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
